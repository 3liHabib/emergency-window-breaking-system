<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Sensor Emergency Window Breaking System - Ali Hussain</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh; color: #e0e0e0; overflow-x: hidden;
        }
        .main-container { max-width: 1600px; margin: 0 auto; padding: 20px; }
        .header {
            text-align: center; padding: 40px 20px;
            background: linear-gradient(135deg, rgba(30, 30, 60, 0.8), rgba(40, 40, 80, 0.6));
            border-radius: 20px; margin-bottom: 30px; backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.2);
        }
        h1 {
            font-size: 2.8em; font-weight: 300; letter-spacing: 2px; margin-bottom: 10px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #6366f1);
            background-size: 200% auto; -webkit-background-clip: text;
            -webkit-text-fill-color: transparent; background-clip: text;
            animation: gradient 3s ease infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .subtitle { font-size: 1.1em; color: #9ca3af; margin-bottom: 15px; letter-spacing: 1px; }
        .author {
            display: inline-block; padding: 8px 24px;
            background: rgba(99, 102, 241, 0.2); border: 1px solid rgba(99, 102, 241, 0.4);
            border-radius: 50px; font-size: 1em; letter-spacing: 0.5px;
        }
        .controls-section {
            background: linear-gradient(135deg, rgba(30, 30, 60, 0.6), rgba(40, 40, 80, 0.4));
            border-radius: 20px; padding: 30px; margin-bottom: 30px; backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.15);
        }
        .section-title {
            font-size: 1.6em; font-weight: 300; letter-spacing: 1px; margin-bottom: 30px;
            padding-bottom: 15px; border-bottom: 2px solid rgba(99, 102, 241, 0.3);
        }
        .sensor-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .sensor-card {
            background: rgba(20, 20, 40, 0.6); border-radius: 15px; padding: 25px;
            border: 1px solid rgba(100, 100, 200, 0.1); transition: all 0.3s ease;
        }
        .sensor-card:hover { transform: translateY(-5px); background: rgba(30, 30, 50, 0.8); box-shadow: 0 10px 30px rgba(99, 102, 241, 0.2); }
        .sensor-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .sensor-name { font-size: 1.1em; color: #e0e0e0; }
        .status-badge {
            padding: 4px 12px; border-radius: 20px; font-size: 0.75em; font-weight: 600;
            text-transform: uppercase; letter-spacing: 1px; background: rgba(100, 100, 100, 0.2);
            color: #6b7280; border: 1px solid rgba(100, 100, 100, 0.3);
            display: flex; align-items: center; gap: 6px;
        }
        .status-badge.active { background: rgba(34, 197, 94, 0.2); color: #22c55e; border-color: rgba(34, 197, 94, 0.4); }
        .status-badge.warning { background: rgba(251, 146, 60, 0.2); color: #fb923c; border-color: rgba(251, 146, 60, 0.4); }
        .status-badge.danger { background: rgba(239, 68, 68, 0.2); color: #ef4444; border-color: rgba(239, 68, 68, 0.4); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: currentColor; animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.8); }
        }
        .sensor-value { text-align: center; padding: 20px; background: rgba(10, 10, 20, 0.4); border-radius: 10px; margin: 15px 0; }
        .value-display { font-size: 2.2em; font-weight: 200; color: #e0e0e0; margin-bottom: 5px; }
        .value-label { font-size: 0.85em; color: #6b7280; text-transform: uppercase; letter-spacing: 1px; }
        .slider-container { margin: 20px 0; position: relative; }
        .slider {
            -webkit-appearance: none; width: 100%; height: 6px; border-radius: 3px;
            background: rgba(50, 50, 70, 0.3); outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%;
            background: #6366f1; cursor: pointer; box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
        }
        .slider::-webkit-slider-thumb:hover { transform: scale(1.3); background: #8b5cf6; }
        .slider-track {
            position: absolute; top: 0; left: 0; height: 6px;
            background: linear-gradient(to right, #6366f1, #8b5cf6); border-radius: 3px;
            transition: width 0.1s ease; pointer-events: none;
        }
        .slider-wrapper { position: relative; }
        .threshold-info { display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.8em; color: #6b7280; }
        .threshold-info span { padding: 2px 8px; background: rgba(50, 50, 70, 0.3); border-radius: 4px; }
        .button-control {
            width: 100%; padding: 15px; background: rgba(50, 50, 70, 0.3);
            border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 8px; color: #e0e0e0;
            cursor: pointer; transition: all 0.3s ease; font-size: 0.95em;
            text-transform: uppercase; letter-spacing: 1px; margin-top: 20px;
        }
        .button-control:hover { background: rgba(99, 102, 241, 0.3); border-color: rgba(99, 102, 241, 0.6); }
        .button-control.active { background: rgba(239, 68, 68, 0.3); border-color: #ef4444; }
        .logic-section {
            background: linear-gradient(135deg, rgba(30, 30, 60, 0.6), rgba(40, 40, 80, 0.4));
            border-radius: 20px; padding: 30px; margin-bottom: 30px; backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.15);
        }
        .view-buttons { display: flex; gap: 15px; margin-bottom: 20px; background: rgba(10, 10, 20, 0.6); padding: 10px; border-radius: 12px; }
        .view-btn {
            flex: 1; padding: 12px 20px; background: rgba(50, 50, 70, 0.3);
            border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 8px; color: #e0e0e0;
            cursor: pointer; transition: all 0.3s ease; font-size: 0.95em;
            text-transform: uppercase; letter-spacing: 1px; text-align: center;
        }
        .view-btn:hover { background: rgba(99, 102, 241, 0.2); }
        .view-btn.active { background: rgba(99, 102, 241, 0.4); border-color: #6366f1; box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
        .diagram-container {
            background: rgba(10, 10, 20, 0.6); border-radius: 15px; padding: 30px;
            margin: 20px 0; position: relative; overflow: hidden;
        }
        .view-content { display: none; }
        .view-content.active { display: block; }
        .truth-table {
            width: 100%; border-collapse: collapse; margin: 20px 0;
            font-family: monospace; font-size: 0.9em;
        }
        .truth-table th {
            background: rgba(99, 102, 241, 0.2); padding: 12px; text-align: center;
            border: 1px solid rgba(99, 102, 241, 0.3); color: #e0e0e0;
            font-weight: 600; letter-spacing: 1px;
        }
        .truth-table td {
            padding: 10px; text-align: center; border: 1px solid rgba(100, 100, 200, 0.2);
            background: rgba(20, 20, 40, 0.4); color: #9ca3af;
        }
        .truth-table tr:hover td { background: rgba(99, 102, 241, 0.1); }
        .truth-table .output-true { background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; }
        .truth-table .output-false { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
        
        /* Simulation from uploaded HTML */
        .simulation-container {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(to bottom, #87CEEB 0%, #4682B4 70%, #2F4F7F 100%);
            border-radius: 15px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .water-level {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 119, 190, 0.9), rgba(0, 150, 220, 0.7));
            transition: height 0.5s ease;
            height: 0;
            z-index: 1;
        }
        
        .car-body {
            position: relative;
            width: 200px;
            height: 120px;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px 20px 10px 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 2;
            transition: transform 0.5s ease;
        }
        
        .car-window {
            position: absolute;
            background: linear-gradient(135deg, rgba(173, 216, 230, 0.8), rgba(135, 206, 235, 0.6));
            border: 2px solid #2c3e50;
            transition: all 0.5s ease;
        }
        
        .window-left {
            top: 20px;
            left: 10px;
            width: 40px;
            height: 50px;
            border-radius: 8px;
        }
        
        .window-right {
            top: 20px;
            right: 10px;
            width: 40px;
            height: 50px;
            border-radius: 8px;
        }
        
        .window-broken {
            animation: shatter 0.6s ease-out forwards;
        }
        
        @keyframes shatter {
            0% { opacity: 1; }
            50% { opacity: 0.5; transform: scale(1.1); }
            100% { opacity: 0; transform: scale(0.8); background: transparent; border-color: transparent; }
        }
        
        .water-level-interior {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 119, 190, 0.7), rgba(0, 150, 220, 0.5));
            border-radius: 0 0 10px 10px;
            transition: height 0.5s ease;
            height: 0;
            z-index: 1;
        }
        
        .simulation-info {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9em;
            z-index: 10;
        }
        
        .simulation-info div {
            margin: 5px 0;
            color: #e0e0e0;
        }
        
        .simulation-info span {
            color: #6366f1;
            font-weight: bold;
        }
        
        .simulation-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 10;
        }
        
        .sim-button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        
        .run-button {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
        }
        
        .run-button:hover { transform: translateY(-2px); }
        
        .reset-button {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }
        
        .reset-button:hover { transform: translateY(-2px); }
        
        .output-display {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.8), rgba(30, 30, 50, 0.6));
            border-radius: 20px; padding: 40px; margin-top: 30px; text-align: center;
            border: 2px solid rgba(100, 100, 200, 0.2);
        }
        .output-label {
            font-size: 1em; color: #6b7280; margin-bottom: 20px;
            text-transform: uppercase; letter-spacing: 2px; font-weight: 600;
        }
        .output-status {
            font-size: 3.5em; font-weight: 200; color: #22c55e;
            transition: all 0.4s ease; letter-spacing: 3px;
        }
        .output-status.breaking { color: #ef4444; animation: alert 1s infinite; }
        @keyframes alert {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        .window-status {
            display: flex; justify-content: center; gap: 30px; margin-top: 25px;
        }
        .window-indicator {
            padding: 15px 30px; background: rgba(20, 20, 40, 0.6);
            border-radius: 10px; border: 1px solid rgba(100, 100, 200, 0.2);
            font-size: 1.2em; transition: all 0.3s ease;
        }
        .window-indicator.active {
            background: rgba(239, 68, 68, 0.3); border-color: #ef4444; color: #ef4444;
        }
        .status-section {
            background: linear-gradient(135deg, rgba(30, 30, 60, 0.6), rgba(40, 40, 80, 0.4));
            border-radius: 20px; padding: 30px; backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.15);
        }
        .status-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px; margin-top: 20px;
        }
        .status-card {
            background: rgba(20, 20, 40, 0.6); border-radius: 12px; padding: 20px;
            text-align: center; border: 1px solid rgba(100, 100, 200, 0.1);
        }
        .status-title {
            font-size: 0.9em; color: #6b7280; margin-bottom: 10px;
            text-transform: uppercase; letter-spacing: 1px;
        }
        .status-value { font-size: 1.8em; font-weight: 300; color: #e0e0e0; }
        .status-value.success { color: #22c55e; }
        .status-value.warning { color: #fb923c; }
        .status-value.danger { color: #ef4444; }
        .warning-banner {
            display: none; background: linear-gradient(90deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1));
            border: 1px solid rgba(239, 68, 68, 0.4); border-radius: 12px;
            padding: 20px; margin: 20px 0; text-align: center;
        }
        .warning-banner.active { display: block; }
        .countdown-display { font-size: 3em; font-weight: 200; color: #ef4444; margin: 10px 0; }
        .footer {
            text-align: center; padding: 30px; color: #6b7280;
            margin-top: 50px; border-top: 1px solid rgba(100, 100, 200, 0.1);
        }
        .footer-author { font-size: 1.1em; margin-bottom: 10px; }
        .footer-author span { color: #6366f1; font-weight: 500; }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>Multi-Sensor Emergency Window Breaking System</h1>
            <div class="subtitle">Electronics Project - First Year - University of Strathclyde Bahrain</div>
            <div class="author">Designed by Ali Hussain</div>
        </div>

        <div class="controls-section">
            <h2 class="section-title">Sensor Input Controls</h2>
            <div class="sensor-grid">
                <div class="sensor-card">
                    <div class="sensor-header">
                        <div class="sensor-name">Water Depth Outside</div>
                        <div class="status-badge" id="depth-status">
                            <span class="status-dot"></span>
                            SAFE
                        </div>
                    </div>
                    <div class="sensor-value">
                        <div class="value-display" id="depth-value">0.0 m</div>
                        <div class="value-label">External Depth</div>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-container">
                            <div class="slider-track" id="depth-track"></div>
                            <input type="range" class="slider" id="depth-slider" min="0" max="5" step="0.1" value="0">
                        </div>
                    </div>
                    <div class="threshold-info">
                        <span>Critical: 1.5m</span>
                        <span>Danger: 3.0m</span>
                    </div>
                </div>

                <div class="sensor-card">
                    <div class="sensor-header">
                        <div class="sensor-name">Water Ingress (In Car)</div>
                        <div class="status-badge" id="water-status">
                            <span class="status-dot"></span>
                            NONE
                        </div>
                    </div>
                    <div class="sensor-value">
                        <div class="value-display" id="water-value">0 cm</div>
                        <div class="value-label">Interior Water Level</div>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-container">
                            <div class="slider-track" id="water-track"></div>
                            <input type="range" class="slider" id="water-slider" min="0" max="150" step="5" value="0">
                        </div>
                    </div>
                    <div class="threshold-info">
                        <span>Warning: 50cm</span>
                        <span>Critical: 80cm</span>
                    </div>
                </div>

                <div class="sensor-card">
                    <div class="sensor-header">
                        <div class="sensor-name">Door Pressure Differential</div>
                        <div class="status-badge" id="pressure-status">
                            <span class="status-dot"></span>
                            NORMAL
                        </div>
                    </div>
                    <div class="sensor-value">
                        <div class="value-display" id="pressure-value">0 kPa</div>
                        <div class="value-label">ΔP (Outside-Inside)</div>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-container">
                            <div class="slider-track" id="pressure-track"></div>
                            <input type="range" class="slider" id="pressure-slider" min="0" max="50" step="1" value="0">
                        </div>
                    </div>
                    <div class="threshold-info">
                        <span>Door Opens: <15kPa</span>
                        <span>Blocked: ≥15kPa</span>
                    </div>
                </div>

                <div class="sensor-card">
                    <div class="sensor-header">
                        <div class="sensor-name">Vehicle Tilt</div>
                        <div class="status-badge" id="tilt-status">
                            <span class="status-dot"></span>
                            LEVEL
                        </div>
                    </div>
                    <div class="sensor-value">
                        <div class="value-display" id="tilt-value">0°</div>
                        <div class="value-label">Window Selection</div>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-container">
                            <div class="slider-track" id="tilt-track"></div>
                            <input type="range" class="slider" id="tilt-slider" min="-45" max="45" step="1" value="0">
                        </div>
                    </div>
                    <div class="threshold-info">
                        <span>Left: <-15°</span>
                        <span>Both: -15° to 15°</span>
                        <span>Right: >15°</span>
                    </div>
                </div>

                <div class="sensor-card">
                    <div class="sensor-header">
                        <div class="sensor-name">Oxygen Level</div>
                        <div class="status-badge" id="oxygen-status">
                            <span class="status-dot"></span>
                            NORMAL
                        </div>
                    </div>
                    <div class="sensor-value">
                        <div class="value-display" id="oxygen-value">21.0%</div>
                        <div class="value-label">Cabin O₂ Concentration</div>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-container">
                            <div class="slider-track" id="oxygen-track"></div>
                            <input type="range" class="slider" id="oxygen-slider" min="0" max="21" step="0.5" value="21">
                        </div>
                    </div>
                    <div class="threshold-info">
                        <span>Critical: ≤15%</span>
                    </div>
                </div>

                <div class="sensor-card">
                    <div class="sensor-header">
                        <div class="sensor-name">Manual Override</div>
                        <div class="status-badge" id="manual-status">
                            <span class="status-dot"></span>
                            DISABLED
                        </div>
                    </div>
                    <div class="sensor-value">
                        <div class="value-display" id="manual-value">SYSTEM ARMED</div>
                        <div class="value-label">Override Control</div>
                    </div>
                    <button class="button-control" id="manual-button">ENABLE MANUAL OVERRIDE</button>
                </div>
            </div>
        </div>

        <div class="logic-section">
            <h2 class="section-title">System Logic Visualization</h2>
            
            <div class="view-buttons">
                <button class="view-btn active" onclick="switchView('circuit')">Logic Gate Circuit</button>
                <button class="view-btn" onclick="switchView('truth')">Truth Table</button>
                <button class="view-btn" onclick="switchView('simulation')">Simulation</button>
            </div>
            
            <div class="diagram-container">
                <!-- Circuit View with PERFECT straight lines -->
                <div class="view-content active" id="circuit-view">
                    <svg viewBox="0 0 1650 850" xmlns="http://www.w3.org/2000/svg" style="width: 100%;">
                        <defs>
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="3"/>
                            </filter>
                            <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                <path d="M 0 0 L 6 3 L 0 6 Z" fill="#6366f1"/>
                            </marker>
                            <marker id="arrow-active" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                <path d="M 0 0 L 6 3 L 0 6 Z" fill="#22c55e"/>
                            </marker>
                            <marker id="arrow-danger" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                <path d="M 0 0 L 6 3 L 0 6 Z" fill="#ef4444"/>
                            </marker>
                        </defs>
                        
                        <text x="825" y="40" font-family="monospace" font-size="20" fill="#6366f1" text-anchor="middle" font-weight="bold">
                            EMERGENCY WINDOW BREAKING SYSTEM - LOGIC CIRCUIT
                        </text>
                        
                        <!-- INPUTS -->
                        <rect x="50" y="120" width="180" height="50" rx="8" fill="rgba(99, 102, 241, 0.1)" stroke="#6366f1" stroke-width="2"/>
                        <text x="140" y="150" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">DEPTH ≥1.5m</text>
                        <circle cx="238" cy="145" r="8" id="depth-led" fill="#374151" stroke="#6366f1" stroke-width="2"/>
                        
                        <rect x="50" y="200" width="180" height="50" rx="8" fill="rgba(99, 102, 241, 0.1)" stroke="#6366f1" stroke-width="2"/>
                        <text x="140" y="230" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">PRESSURE ≥15kPa</text>
                        <circle cx="238" cy="225" r="8" id="pressure-led" fill="#374151" stroke="#6366f1" stroke-width="2"/>
                        
                        <rect x="50" y="360" width="180" height="50" rx="8" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="2"/>
                        <text x="140" y="390" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">MANUAL OVERRIDE</text>
                        <circle cx="238" cy="385" r="8" id="manual-led" fill="#374151" stroke="#ef4444" stroke-width="2"/>
                        
                        <rect x="50" y="520" width="180" height="50" rx="8" fill="rgba(251, 146, 60, 0.1)" stroke="#fb923c" stroke-width="2"/>
                        <text x="140" y="550" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">INGRESS ≥80cm</text>
                        <circle cx="238" cy="545" r="8" id="water-led" fill="#374151" stroke="#fb923c" stroke-width="2"/>
                        
                        <rect x="50" y="590" width="180" height="50" rx="8" fill="rgba(251, 146, 60, 0.1)" stroke="#fb923c" stroke-width="2"/>
                        <text x="140" y="620" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">O₂ ≤15%</text>
                        <circle cx="238" cy="615" r="8" id="oxygen-led" fill="#374151" stroke="#fb923c" stroke-width="2"/>
                        
                        <rect x="50" y="660" width="180" height="50" rx="8" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="2"/>
                        <text x="140" y="690" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">DEPTH ≥3.0m</text>
                        <circle cx="238" cy="685" r="8" id="danger-led" fill="#374151" stroke="#ef4444" stroke-width="2"/>
                        
                        <rect x="50" y="730" width="180" height="50" rx="8" fill="rgba(99, 102, 241, 0.1)" stroke="#6366f1" stroke-width="2"/>
                        <text x="140" y="760" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">DEPTH ≥1.5m</text>
                        <circle cx="238" cy="755" r="8" id="depth-led-2" fill="#374151" stroke="#6366f1" stroke-width="2"/>
                        
                        <!-- TILT SENSOR - AFTER ARROW TIP -->
                        <rect x="1370" y="300" width="180" height="50" rx="8" fill="rgba(139, 92, 246, 0.1)" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="1460" y="330" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle">TILT SENSOR</text>
                        <circle cx="1558" cy="325" r="8" id="tilt-led" fill="#374151" stroke="#8b5cf6" stroke-width="2"/>
                        
                        <!-- AND GATE 1: Depth AND Pressure -->
                        <g transform="translate(380, 150)">
                            <path d="M 0 0 L 50 0 Q 90 30 50 60 L 0 60 Z" fill="rgba(99, 102, 241, 0.2)" stroke="#6366f1" stroke-width="3"/>
                            <text x="45" y="35" font-family="monospace" font-size="16" fill="#e0e0e0" text-anchor="middle" font-weight="bold">AND</text>
                            <line x1="-134" y1="-5" x2="0" y2="15" stroke="#4b5563" stroke-width="3" id="and1-in1" marker-end="url(#arrow)"/>
                            <line x1="-134" y1="75" x2="0" y2="45" stroke="#4b5563" stroke-width="3" id="and1-in2" marker-end="url(#arrow)"/>
                            <line x1="90" y1="30" x2="160" y2="30" stroke="#4b5563" stroke-width="3" id="and1-out" marker-end="url(#arrow)"/>
                        </g>
                        
                        <!-- NOT GATE - STRAIGHT LINES -->
                        <g transform="translate(380, 375)">
                            <path d="M 0 0 L 0 50 L 45 25 Z" fill="rgba(239, 68, 68, 0.2)" stroke="#ef4444" stroke-width="3"/>
                            <circle cx="54" cy="25" r="9" fill="none" stroke="#ef4444" stroke-width="3"/>
                            <text x="22" y="30" font-family="monospace" font-size="15" fill="#e0e0e0" text-anchor="middle">NOT</text>
                            <!-- STRAIGHT line from manual (shorter) -->
                            <line x1="-134" y1="10" x2="0" y2="25" stroke="#4b5563" stroke-width="3" id="not-in" marker-end="url(#arrow)"/>
                            <!-- STRAIGHT line to AND2 -->
                            <line x1="63" y1="25" x2="330" y2="25" stroke="#4b5563" stroke-width="3" id="not-out" marker-end="url(#arrow)"/>
                        </g>
                        
                        <!-- AND GATE 2: (Depth AND Pressure) AND NOT Manual -->
                        <g transform="translate(710, 210)">
                            <path d="M 0 0 L 50 0 Q 90 30 50 60 L 0 60 Z" fill="rgba(99, 102, 241, 0.2)" stroke="#6366f1" stroke-width="3"/>
                            <text x="45" y="35" font-family="monospace" font-size="16" fill="#e0e0e0" text-anchor="middle" font-weight="bold">AND</text>
                            <line x1="-170" y1="-30" x2="0" y2="15" stroke="#4b5563" stroke-width="3" id="and2-in1" marker-end="url(#arrow)"/>
                            <line x1="-17" y1="190" x2="0" y2="45" stroke="#4b5563" stroke-width="3" id="and2-in2" marker-end="url(#arrow)"/>
                            <line x1="90" y1="30" x2="170" y2="30" stroke="#4b5563" stroke-width="3" id="and2-out" marker-end="url(#arrow)"/>
                        </g>
                        
                        <!-- OR GATE: Emergency (BACK IN ORIGINAL POSITION) -->
                        <g transform="translate(380, 600)">
                            <path d="M 15 0 Q 0 35 15 70 L 55 70 Q 95 35 55 0 Z" fill="rgba(251, 146, 60, 0.2)" stroke="#fb923c" stroke-width="3"/>
                            <text x="50" y="40" font-family="monospace" font-size="16" fill="#e0e0e0" text-anchor="middle" font-weight="bold">OR</text>
                            <!-- STRAIGHT lines from sensors to OR -->
                            <line x1="-127" y1="-55" x2="15" y2="17" stroke="#4b5563" stroke-width="3" id="or1-in1" marker-end="url(#arrow)"/>
                            <line x1="-127" y1="15" x2="15" y2="35" stroke="#4b5563" stroke-width="3" id="or1-in2" marker-end="url(#arrow)"/>
                            <line x1="-127" y1="85" x2="15" y2="53" stroke="#4b5563" stroke-width="3" id="or1-in3" marker-end="url(#arrow)"/>
                            <line x1="95" y1="35" x2="170" y2="35" stroke="#4b5563" stroke-width="3" id="or1-out" marker-end="url(#arrow)"/>
                        </g>
                        
                        <!-- AND GATE 3: Emergency AND Depth ≥1.5 -->
                        <g transform="translate(630, 620)">
                            <path d="M 0 0 L 50 0 Q 90 30 50 60 L 0 60 Z" fill="rgba(99, 102, 241, 0.2)" stroke="#6366f1" stroke-width="3"/>
                            <text x="45" y="35" font-family="monospace" font-size="16" fill="#e0e0e0" text-anchor="middle" font-weight="bold">AND</text>
                            <!-- Line from OR to AND -->
                            <line x1="-80" y1="15" x2="0" y2="20" stroke="#4b5563" stroke-width="3" id="and3-in1" marker-end="url(#arrow)"/>
                            <!-- Line from depth to AND -->
                            <line x1="-384" y1="135" x2="0" y2="40" stroke="#4b5563" stroke-width="3" id="and3-in2" marker-end="url(#arrow)"/>
                            <line x1="90" y1="30" x2="170" y2="30" stroke="#4b5563" stroke-width="3" id="and3-out" marker-end="url(#arrow)"/>
                        </g>
                        
                        <!-- TIMER - AFTER AND GATE -->
                        <g transform="translate(880, 635)">
                            <rect x="0" y="0" width="100" height="60" rx="10" fill="rgba(239, 68, 68, 0.2)" stroke="#ef4444" stroke-width="3"/>
                            <text x="50" y="25" font-family="monospace" font-size="14" fill="#e0e0e0" text-anchor="middle" font-weight="bold">TIMER</text>
                            <text x="50" y="48" font-family="monospace" font-size="18" fill="#ef4444" text-anchor="middle" font-weight="bold" id="timer-value">10s</text>
                            <line x1="-80" y1="15" x2="0" y2="30" stroke="#4b5563" stroke-width="3" id="timer-in" marker-end="url(#arrow)"/>
                            <line x1="100" y1="30" x2="170" y2="30" stroke="#4b5563" stroke-width="3" id="timer-out" marker-end="url(#arrow)"/>
                        </g>
                        
                        <!-- FINAL OR GATE - IN THE MIDDLE -->
                        <g transform="translate(1130, 420)">
                            <path d="M 15 0 Q 0 40 15 80 L 60 80 Q 105 40 60 0 Z" fill="rgba(34, 197, 94, 0.2)" stroke="#22c55e" stroke-width="4"/>
                            <text x="55" y="45" font-family="monospace" font-size="18" fill="#e0e0e0" text-anchor="middle" font-weight="bold">OR</text>
                            <!-- Line from normal path (AND2) -->
                            <line x1="-250" y1="-180" x2="15" y2="25" stroke="#4b5563" stroke-width="3" id="final-in1" marker-end="url(#arrow)"/>
                            <!-- Line from timer -->
                            <line x1="-80" y1="245" x2="15" y2="55" stroke="#4b5563" stroke-width="3" id="final-in2" marker-end="url(#arrow)"/>
                            <!-- OUTPUT TO WINDOW SELECTOR -->
                            <line x1="105" y1="40" x2="220" y2="40" stroke="#4b5563" stroke-width="4" id="final-out" marker-end="url(#arrow)"/>
                        </g>
                        
                        <!-- WINDOW SELECTOR - ALIGNED WITH OUTPUT -->
                        <g transform="translate(1370, 400)">
                            <rect x="0" y="0" width="220" height="140" rx="12" fill="rgba(139, 92, 246, 0.1)" stroke="#8b5cf6" stroke-width="3"/>
                            <text x="110" y="30" font-family="monospace" font-size="16" fill="#e0e0e0" text-anchor="middle" font-weight="bold">WINDOW SELECTOR</text>
                            <text x="110" y="60" font-family="monospace" font-size="13" fill="#9ca3af" text-anchor="middle" id="tilt-output">BOTH WINDOWS</text>
                            
                            <rect x="25" y="80" width="80" height="45" rx="6" fill="rgba(20, 20, 40, 0.6)" stroke="#6366f1" stroke-width="2" id="left-window"/>
                            <text x="65" y="107" font-family="monospace" font-size="13" fill="#e0e0e0" text-anchor="middle">LEFT</text>
                            
                            <rect x="115" y="80" width="80" height="45" rx="6" fill="rgba(20, 20, 40, 0.6)" stroke="#6366f1" stroke-width="2" id="right-window"/>
                            <text x="155" y="107" font-family="monospace" font-size="13" fill="#e0e0e0" text-anchor="middle">RIGHT</text>
                        </g>
                        
                        <!-- GREEN DOTTED line from Tilt to Window Selector -->
                        <line x1="1480" y1="350" x2="1480" y2="400" stroke="#22c55e" stroke-width="2" stroke-dasharray="5,5" id="tilt-connection"/>
                        
                        <text x="825" y="830" font-family="monospace" font-size="13" fill="#9ca3af" text-anchor="middle">
                            Logic: [(Depth≥1.5 ∧ Pressure≥15) ∧ ¬Manual] ∨ [Timer(10s): (Ingress≥80 ∨ O₂≤15 ∨ Depth≥3.0) ∧ Depth≥1.5]
                        </text>
                    </svg>
                </div>

                <!-- Truth Table View -->
                <div class="view-content" id="truth-view">
                    <table class="truth-table">
                        <thead>
                            <tr>
                                <th colspan="7" style="background: rgba(99, 102, 241, 0.3);">INPUTS</th>
                                <th colspan="4" style="background: rgba(251, 146, 60, 0.3);">INTERMEDIATE</th>
                                <th rowspan="2" style="background: rgba(34, 197, 94, 0.3); vertical-align: middle;">OUTPUT<br/>BREAK<br/>WINDOW</th>
                            </tr>
                            <tr>
                                <th>Depth≥1.5</th>
                                <th>Press≥15</th>
                                <th>Manual</th>
                                <th>Ing≥80</th>
                                <th>O₂≤15</th>
                                <th>Dep≥3.0</th>
                                <th>Tilt</th>
                                <th>Normal<br/>Path</th>
                                <th>Emerg<br/>OR</th>
                                <th>Emerg<br/>Path</th>
                                <th>Timer<br/>10s</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0°</td>
                                <td>0</td><td>0</td><td>0</td><td>0</td>
                                <td class="output-false">0</td>
                            </tr>
                            <tr>
                                <td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0°</td>
                                <td>1</td><td>0</td><td>0</td><td>0</td>
                                <td class="output-true">1</td>
                            </tr>
                            <tr>
                                <td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0°</td>
                                <td>0</td><td>0</td><td>0</td><td>0</td>
                                <td class="output-false">0</td>
                            </tr>
                            <tr>
                                <td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0°</td>
                                <td>0</td><td>1</td><td>1</td><td>1</td>
                                <td class="output-true">1</td>
                            </tr>
                            <tr>
                                <td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0°</td>
                                <td>0</td><td>1</td><td>1</td><td>1</td>
                                <td class="output-true">1</td>
                            </tr>
                            <tr>
                                <td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0°</td>
                                <td>0</td><td>1</td><td>1</td><td>1</td>
                                <td class="output-true">1</td>
                            </tr>
                            <tr style="background: rgba(239, 68, 68, 0.05);">
                                <td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0°</td>
                                <td>0</td><td>1</td><td>0</td><td>0</td>
                                <td class="output-false">0</td>
                            </tr>
                            <tr style="background: rgba(239, 68, 68, 0.05);">
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0°</td>
                                <td>0</td><td>1</td><td>0</td><td>0</td>
                                <td class="output-false">0</td>
                            </tr>
                            <tr style="background: rgba(239, 68, 68, 0.05);">
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0°</td>
                                <td>0</td><td>1</td><td>0</td><td>0</td>
                                <td class="output-false">0</td>
                            </tr>
                            <tr>
                                <td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>-20°</td>
                                <td>1</td><td>0</td><td>0</td><td>0</td>
                                <td class="output-true">1</td>
                            </tr>
                            <tr>
                                <td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20°</td>
                                <td>1</td><td>0</td><td>0</td><td>0</td>
                                <td class="output-true">1</td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="color: #9ca3af; margin-top: 20px; text-align: center; font-size: 0.95em; padding: 15px; background: rgba(239, 68, 68, 0.05); border-radius: 10px; border: 1px solid rgba(239, 68, 68, 0.2);">
                        <strong style="color: #ef4444;">⚠ Key Protection:</strong> Rows 7-9 (highlighted) show emergency conditions (Ingress/O₂/Depth≥3.0) are active,<br/>
                        BUT system does NOT activate because Depth ≥1.5m requirement is NOT met. This prevents false triggering.<br/>
                        <strong style="color: #fb923c;">Timer reduced to 10 seconds for faster emergency response.</strong>
                    </div>
                </div>

                <!-- Simulation from uploaded HTML -->
                <div class="view-content" id="simulation-view">
                    <div class="simulation-container">
                        <div class="water-level" id="water-external"></div>
                        <div class="car-body" id="car">
                            <div class="car-window window-left" id="sim-window-left"></div>
                            <div class="car-window window-right" id="sim-window-right"></div>
                            <div class="water-level-interior" id="water-internal"></div>
                        </div>
                        <div class="simulation-info">
                            <div>External Depth: <span id="sim-depth">0.0m</span></div>
                            <div>Internal Water: <span id="sim-ingress">0cm</span></div>
                            <div>Door Pressure: <span id="sim-pressure">0kPa</span></div>
                            <div>Vehicle Tilt: <span id="sim-tilt">0°</span></div>
                            <div>O₂ Level: <span id="sim-oxygen">21%</span></div>
                            <div>Status: <span id="sim-status">SAFE</span></div>
                        </div>
                        <div class="simulation-controls">
                            <button class="sim-button run-button" id="run-sim">▶ RUN</button>
                            <button class="sim-button reset-button" id="reset-sim">↻ RESET</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="output-display">
                <div class="output-label">System Output Status</div>
                <div class="output-status" id="system-output">WINDOWS INTACT</div>
                <div class="window-status">
                    <div class="window-indicator" id="left-win-status">LEFT: INTACT</div>
                    <div class="window-indicator" id="right-win-status">RIGHT: INTACT</div>
                </div>
            </div>
        </div>

        <div class="warning-banner" id="warning-banner">
            <h3 style="color: #ef4444; margin-bottom: 10px; font-size: 1.5em;">⚠ EMERGENCY OVERRIDE ACTIVATED ⚠</h3>
            <div class="countdown-display" id="countdown">10</div>
            <div style="color: #fb923c; font-size: 1.1em;">Windows will break automatically</div>
        </div>

        <div class="status-section">
            <h2 class="section-title">System Status Monitor</h2>
            <div class="status-grid">
                <div class="status-card">
                    <div class="status-title">Normal Path</div>
                    <div class="status-value" id="normal-status">INACTIVE</div>
                </div>
                <div class="status-card">
                    <div class="status-title">Emergency Path</div>
                    <div class="status-value" id="override-status">INACTIVE</div>
                </div>
                <div class="status-card">
                    <div class="status-title">System Mode</div>
                    <div class="status-value" id="mode-status">STANDBY</div>
                </div>
                <div class="status-card">
                    <div class="status-title">Timer Status</div>
                    <div class="status-value" id="timer-status">IDLE</div>
                </div>
                <div class="status-card">
                    <div class="status-title">Door Status</div>
                    <div class="status-value" id="door-status">OPERABLE</div>
                </div>
                <div class="status-card">
                    <div class="status-title">Window Target</div>
                    <div class="status-value" id="window-target">BOTH</div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="footer-author">Developed by <span>Ali Hussain</span></div>
            <div>Electronics Project - First Year - University of Strathclyde Bahrain</div>
            <div style="margin-top: 10px; font-size: 0.9em; opacity: 0.7;">Multi-Sensor Emergency Window Breaking System © 2025</div>
        </div>
    </div>

    <script>
        // All variables
        const depthSlider = document.getElementById('depth-slider');
        const waterSlider = document.getElementById('water-slider');
        const pressureSlider = document.getElementById('pressure-slider');
        const tiltSlider = document.getElementById('tilt-slider');
        const oxygenSlider = document.getElementById('oxygen-slider');
        const manualButton = document.getElementById('manual-button');
        const runSimBtn = document.getElementById('run-sim');
        const resetSimBtn = document.getElementById('reset-sim');
        
        let manualOverride = false;
        let warningTimer = null;
        let countdown = 10; // CHANGED TO 10 SECONDS
        
        // View switching
        function switchView(view) {
            ['circuit', 'truth', 'simulation'].forEach((v, i) => {
                const viewEl = document.getElementById(v + '-view');
                const btnEl = document.querySelectorAll('.view-btn')[i];
                if (v === view) {
                    viewEl.classList.add('active');
                    btnEl.classList.add('active');
                } else {
                    viewEl.classList.remove('active');
                    btnEl.classList.remove('active');
                }
            });
        }
        
        // Simulation functions
        function runSimulation() {
            const depth = parseFloat(depthSlider.value);
            const ingress = parseFloat(waterSlider.value);
            const tilt = parseFloat(tiltSlider.value);
            const oxygen = parseFloat(oxygenSlider.value);
            
            // Update simulation info
            document.getElementById('sim-depth').textContent = depth.toFixed(1) + 'm';
            document.getElementById('sim-ingress').textContent = ingress + 'cm';
            document.getElementById('sim-pressure').textContent = pressureSlider.value + 'kPa';
            document.getElementById('sim-tilt').textContent = tilt + '°';
            document.getElementById('sim-oxygen').textContent = oxygen.toFixed(1) + '%';
            
            // Calculate water heights - REALISTIC LEVELS
            // 1.5m should cover 3/4 of car = 375px (500px * 0.75)
            // 3.0m should fully submerge = 500px
            const externalWaterHeight = Math.min((depth / 3.0) * 500, 500); // Scale: 1.5m = 250px (50%), 3m = 500px (100%)
            const internalWaterHeight = Math.min((ingress / 150) * 120, 120);
            
            document.getElementById('water-external').style.height = externalWaterHeight + 'px';
            document.getElementById('water-internal').style.height = internalWaterHeight + 'px';
            
            // Apply tilt
            document.getElementById('car').style.transform = `rotate(${tilt}deg)`;
            
            // Check if windows should break
            const depthActive = depth >= 1.5;
            const waterActive = ingress >= 80;
            const pressureActive = parseFloat(pressureSlider.value) >= 15;
            const oxygenCritical = oxygen <= 15;
            const depthDanger = depth >= 3.0;
            
            const normalPath = depthActive && pressureActive && !manualOverride;
            const emergOR = waterActive || oxygenCritical || depthDanger;
            const emergPath = emergOR && depthActive; // UPDATED: requires depth ≥1.5m
            
            const finalActivation = normalPath || (emergPath && countdown <= 0);
            const windowTarget = determineWindowTarget(tilt);
            
            // Update status
            if (finalActivation) {
                document.getElementById('sim-status').textContent = 'BREAKING!';
                document.getElementById('sim-status').style.color = '#ef4444';
                
                // Break windows
                if (windowTarget === 'LEFT' || windowTarget === 'BOTH') {
                    document.getElementById('sim-window-left').classList.add('window-broken');
                }
                if (windowTarget === 'RIGHT' || windowTarget === 'BOTH') {
                    document.getElementById('sim-window-right').classList.add('window-broken');
                }
            } else if (emergPath) {
                document.getElementById('sim-status').textContent = 'WAITING';
                document.getElementById('sim-status').style.color = '#fb923c';
            } else if (externalWaterHeight > 100) {
                document.getElementById('sim-status').textContent = 'SUBMERGED';
                document.getElementById('sim-status').style.color = '#fb923c';
            } else {
                document.getElementById('sim-status').textContent = 'SAFE';
                document.getElementById('sim-status').style.color = '#22c55e';
            }
        }
        
        function resetSimulation() {
            document.getElementById('water-external').style.height = '0px';
            document.getElementById('water-internal').style.height = '0px';
            document.getElementById('car').style.transform = 'rotate(0deg)';
            document.getElementById('sim-window-left').classList.remove('window-broken');
            document.getElementById('sim-window-right').classList.remove('window-broken');
            document.getElementById('sim-status').textContent = 'SAFE';
            document.getElementById('sim-status').style.color = '#22c55e';
        }
        
        runSimBtn.addEventListener('click', runSimulation);
        resetSimBtn.addEventListener('click', resetSimulation);
        
        // Slider updates
        function updateSliderTrack(slider, trackId) {
            const track = document.getElementById(trackId);
            const percentage = ((slider.value - slider.min) / (slider.max - slider.min)) * 100;
            track.style.width = percentage + '%';
        }
        
        function determineWindowTarget(tilt) {
            if (tilt < -15) return 'LEFT';
            else if (tilt > 15) return 'RIGHT';
            else return 'BOTH';
        }
        
        // System update
        function updateSystem() {
            const depth = parseFloat(depthSlider.value);
            const ingress = parseFloat(waterSlider.value);
            const pressure = parseFloat(pressureSlider.value);
            const tilt = parseFloat(tiltSlider.value);
            const oxygen = parseFloat(oxygenSlider.value);
            
            // Update displays
            document.getElementById('depth-value').textContent = depth.toFixed(1) + ' m';
            document.getElementById('water-value').textContent = Math.round(ingress) + ' cm';
            document.getElementById('pressure-value').textContent = pressure + ' kPa';
            document.getElementById('tilt-value').textContent = tilt + '°';
            document.getElementById('oxygen-value').textContent = oxygen.toFixed(1) + '%';
            document.getElementById('manual-value').textContent = manualOverride ? 'OVERRIDE ACTIVE' : 'SYSTEM ARMED';
            
            // Check conditions
            const depthActive = depth >= 1.5;
            const waterActive = ingress >= 80;
            const pressureActive = pressure >= 15;
            const oxygenCritical = oxygen <= 15;
            const depthDanger = depth >= 3.0;
            
            const windowTarget = determineWindowTarget(tilt);
            
            // Update badges
            updateStatusBadge('depth-status', depthActive, depthDanger);
            updateStatusBadge('water-status', waterActive, false);
            updateStatusBadge('pressure-status', pressureActive, false);
            updateStatusBadge('tilt-status', tilt !== 0, false);
            updateStatusBadge('oxygen-status', oxygenCritical, false);
            updateStatusBadge('manual-status', manualOverride, false);
            
            // Update LEDs
            updateLED('depth-led', depthActive);
            updateLED('depth-led-2', depthActive);
            updateLED('water-led', waterActive);
            updateLED('pressure-led', pressureActive);
            updateLED('tilt-led', tilt !== 0);
            updateLED('manual-led', manualOverride);
            updateLED('oxygen-led', oxygenCritical);
            updateLED('danger-led', depthDanger);
            
            // Logic - UPDATED WITH DEPTH REQUIREMENT
            const normalPath = depthActive && pressureActive && !manualOverride;
            const emergOR = waterActive || oxygenCritical || depthDanger;
            const emergPath = emergOR && depthActive; // NEW: requires depth ≥1.5m
            
            // Update lines
            updateLogicLines(depthActive, waterActive, pressureActive, manualOverride, oxygenCritical, depthDanger, normalPath, emergOR, emergPath);
            
            // Update window selector
            document.getElementById('tilt-output').textContent = 
                windowTarget === 'LEFT' ? 'LEFT WINDOW' :
                windowTarget === 'RIGHT' ? 'RIGHT WINDOW' : 'BOTH WINDOWS';
            
            document.getElementById('window-target').textContent = windowTarget;
            
            const leftWindow = document.getElementById('left-window');
            const rightWindow = document.getElementById('right-window');
            
            // Timer
            if (emergPath && !warningTimer) {
                startWarning();
            } else if (!emergPath && warningTimer) {
                stopWarning();
            }
            
            const finalActivation = normalPath || (emergPath && countdown <= 0);
            
            // Highlight windows
            if (finalActivation) {
                if (windowTarget === 'LEFT' || windowTarget === 'BOTH') {
                    leftWindow.setAttribute('fill', 'rgba(239, 68, 68, 0.4)');
                    leftWindow.setAttribute('stroke', '#ef4444');
                } else {
                    leftWindow.setAttribute('fill', 'rgba(20, 20, 40, 0.6)');
                    leftWindow.setAttribute('stroke', '#6366f1');
                }
                
                if (windowTarget === 'RIGHT' || windowTarget === 'BOTH') {
                    rightWindow.setAttribute('fill', 'rgba(239, 68, 68, 0.4)');
                    rightWindow.setAttribute('stroke', '#ef4444');
                } else {
                    rightWindow.setAttribute('fill', 'rgba(20, 20, 40, 0.6)');
                    rightWindow.setAttribute('stroke', '#6366f1');
                }
            } else {
                leftWindow.setAttribute('fill', 'rgba(20, 20, 40, 0.6)');
                leftWindow.setAttribute('stroke', '#6366f1');
                rightWindow.setAttribute('fill', 'rgba(20, 20, 40, 0.6)');
                rightWindow.setAttribute('stroke', '#6366f1');
            }
            
            // Status updates
            document.getElementById('normal-status').textContent = normalPath ? 'ACTIVE' : 'INACTIVE';
            document.getElementById('normal-status').className = 'status-value' + (normalPath ? ' success' : '');
            
            document.getElementById('override-status').textContent = emergPath ? (countdown <= 0 ? 'TRIGGERED' : 'COUNTING') : 'INACTIVE';
            document.getElementById('override-status').className = 'status-value' + (emergPath ? ' danger' : '');
            
            document.getElementById('door-status').textContent = pressureActive ? 'BLOCKED' : 'OPERABLE';
            document.getElementById('door-status').className = 'status-value' + (pressureActive ? ' danger' : ' success');
            
            // Output display
            const leftWinStatus = document.getElementById('left-win-status');
            const rightWinStatus = document.getElementById('right-win-status');
            
            if (finalActivation) {
                document.getElementById('system-output').textContent = 'BREAKING WINDOWS';
                document.getElementById('system-output').className = 'output-status breaking';
                
                if (windowTarget === 'LEFT' || windowTarget === 'BOTH') {
                    leftWinStatus.textContent = 'LEFT: BREAKING';
                    leftWinStatus.classList.add('active');
                } else {
                    leftWinStatus.textContent = 'LEFT: INTACT';
                    leftWinStatus.classList.remove('active');
                }
                
                if (windowTarget === 'RIGHT' || windowTarget === 'BOTH') {
                    rightWinStatus.textContent = 'RIGHT: BREAKING';
                    rightWinStatus.classList.add('active');
                } else {
                    rightWinStatus.textContent = 'RIGHT: INTACT';
                    rightWinStatus.classList.remove('active');
                }
            } else {
                document.getElementById('system-output').textContent = 'WINDOWS INTACT';
                document.getElementById('system-output').className = 'output-status';
                leftWinStatus.textContent = 'LEFT: INTACT';
                rightWinStatus.textContent = 'RIGHT: INTACT';
                leftWinStatus.classList.remove('active');
                rightWinStatus.classList.remove('active');
            }
            
            // Mode
            let mode = 'STANDBY';
            if (finalActivation) mode = 'ACTIVATED';
            else if (emergPath) mode = 'WARNING';
            else if (normalPath) mode = 'READY';
            
            document.getElementById('mode-status').textContent = mode;
            document.getElementById('mode-status').className = 'status-value' + 
                (mode === 'ACTIVATED' ? ' danger' : mode === 'WARNING' ? ' warning' : mode === 'READY' ? ' success' : '');
            
            document.getElementById('timer-status').textContent = warningTimer ? countdown + 's' : 'IDLE';
            document.getElementById('timer-status').className = 'status-value' + (warningTimer ? ' warning' : '');
        }
        
        function updateStatusBadge(id, active, isDanger) {
            const badge = document.getElementById(id);
            if (!badge) return;
            
            badge.className = 'status-badge';
            let text = '';
            
            if (id === 'depth-status') {
                if (isDanger) {
                    badge.classList.add('danger');
                    text = 'DANGER';
                } else if (active) {
                    badge.classList.add('warning');
                    text = 'CRITICAL';
                } else {
                    text = 'SAFE';
                }
            } else if (id === 'water-status') {
                if (active) {
                    badge.classList.add('danger');
                    text = 'CRITICAL';
                } else {
                    text = 'NONE';
                }
            } else if (id === 'pressure-status') {
                if (active) {
                    badge.classList.add('danger');
                    text = 'BLOCKED';
                } else {
                    text = 'NORMAL';
                }
            } else if (id === 'tilt-status') {
                if (active) {
                    badge.classList.add('active');
                    text = 'TILTED';
                } else {
                    text = 'LEVEL';
                }
            } else if (id === 'oxygen-status') {
                if (active) {
                    badge.classList.add('danger');
                    text = 'CRITICAL';
                } else {
                    badge.classList.add('active');
                    text = 'NORMAL';
                }
            } else if (id === 'manual-status') {
                if (active) {
                    badge.classList.add('warning');
                    text = 'ENABLED';
                } else {
                    text = 'DISABLED';
                }
            }
            
            const dotSpan = badge.querySelector('.status-dot');
            badge.textContent = '';
            badge.appendChild(dotSpan);
            badge.appendChild(document.createTextNode(text));
        }
        
        function updateLED(id, active) {
            const led = document.getElementById(id);
            if (!led) return;
            if (active) {
                led.setAttribute('fill', '#22c55e');
                led.setAttribute('filter', 'url(#glow)');
            } else {
                led.setAttribute('fill', '#374151');
                led.removeAttribute('filter');
            }
        }
        
        function updateLogicLines(depth, water, pressure, manual, oxygen, danger, normalPath, emergOR, emergPath) {
            const updateLine = (id, active) => {
                const element = document.getElementById(id);
                if (!element) return;
                element.setAttribute('stroke', active ? '#22c55e' : '#4b5563');
                element.setAttribute('marker-end', active ? 'url(#arrow-active)' : 'url(#arrow)');
            };
            
            const updateDangerLine = (id, active) => {
                const element = document.getElementById(id);
                if (!element) return;
                element.setAttribute('stroke', active ? '#ef4444' : '#4b5563');
                element.setAttribute('marker-end', active ? 'url(#arrow-danger)' : 'url(#arrow)');
            };
            
            // Normal path
            updateLine('and1-in1', depth);
            updateLine('and1-in2', pressure);
            updateLine('and1-out', depth && pressure);
            
            updateDangerLine('not-in', manual);
            updateLine('not-out', !manual);
            
            updateLine('and2-in1', depth && pressure);
            updateLine('and2-in2', !manual);
            updateLine('and2-out', normalPath);
            
            // Emergency path
            updateDangerLine('or1-in1', water);
            updateDangerLine('or1-in2', oxygen);
            updateDangerLine('or1-in3', danger);
            updateDangerLine('or1-out', emergOR);
            
            // AND gate after OR (requires depth)
            updateDangerLine('and3-in1', emergOR);
            updateLine('and3-in2', depth);
            updateDangerLine('and3-out', emergPath);
            
            updateDangerLine('timer-in', emergPath);
            updateDangerLine('timer-out', emergPath && countdown <= 0);
            
            updateLine('final-in1', normalPath);
            updateDangerLine('final-in2', emergPath && countdown <= 0);
            
            const finalElement = document.getElementById('final-out');
            if (normalPath || (emergPath && countdown <= 0)) {
                finalElement.setAttribute('stroke', '#22c55e');
                finalElement.setAttribute('marker-end', 'url(#arrow-active)');
            } else {
                finalElement.setAttribute('stroke', '#4b5563');
                finalElement.setAttribute('marker-end', 'url(#arrow)');
            }
            
            // Tilt connection
            const tiltConnection = document.getElementById('tilt-connection');
            if (tiltConnection) {
                const tilt = parseFloat(tiltSlider.value);
                tiltConnection.setAttribute('stroke', tilt !== 0 ? '#22c55e' : '#8b5cf6');
            }
        }
        
        function startWarning() {
            countdown = 10; // CHANGED TO 10 SECONDS
            document.getElementById('warning-banner').classList.add('active');
            document.getElementById('timer-value').textContent = countdown + 's';
            
            warningTimer = setInterval(() => {
                countdown--;
                document.getElementById('countdown').textContent = countdown;
                document.getElementById('timer-value').textContent = countdown + 's';
                document.getElementById('timer-status').textContent = countdown + 's';
                
                if (countdown <= 0) {
                    document.getElementById('countdown').textContent = 'ACTIVATED';
                    document.getElementById('timer-value').textContent = '0s';
                    updateSystem();
                }
            }, 1000);
        }
        
        function stopWarning() {
            clearInterval(warningTimer);
            warningTimer = null;
            countdown = 10; // CHANGED TO 10 SECONDS
            document.getElementById('warning-banner').classList.remove('active');
            document.getElementById('timer-value').textContent = '10s';
            updateSystem();
        }
        
        // Event listeners
        depthSlider.addEventListener('input', () => {
            updateSliderTrack(depthSlider, 'depth-track');
            updateSystem();
        });
        waterSlider.addEventListener('input', () => {
            updateSliderTrack(waterSlider, 'water-track');
            updateSystem();
        });
        pressureSlider.addEventListener('input', () => {
            updateSliderTrack(pressureSlider, 'pressure-track');
            updateSystem();
        });
        tiltSlider.addEventListener('input', () => {
            updateSliderTrack(tiltSlider, 'tilt-track');
            updateSystem();
        });
        oxygenSlider.addEventListener('input', () => {
            updateSliderTrack(oxygenSlider, 'oxygen-track');
            updateSystem();
        });
        
        manualButton.addEventListener('click', () => {
            manualOverride = !manualOverride;
            manualButton.textContent = manualOverride ? 'DISABLE MANUAL OVERRIDE' : 'ENABLE MANUAL OVERRIDE';
            manualButton.classList.toggle('active');
            updateSystem();
        });
        
        // Initialize
        updateSliderTrack(depthSlider, 'depth-track');
        updateSliderTrack(waterSlider, 'water-track');
        updateSliderTrack(pressureSlider, 'pressure-track');
        updateSliderTrack(tiltSlider, 'tilt-track');
        updateSliderTrack(oxygenSlider, 'oxygen-track');
        updateSystem();
    </script>
</body>
</html>